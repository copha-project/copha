<div class="dark-theme-switcher">
    <button type="button" title="明亮/暗黑模式切换" aria-label="Toggle dark/light mode"></button>
</div>
<style>
.dark-theme-switcher{
    position: fixed;
    right: 40px;
    display: flex;
    padding: 10px 0;
    flex-direction: column;
    justify-items: center;
    border-radius: 5px;
    bottom: 140px;
    width: 50px;
    background-color: #7db7eb;
}
.dark-theme-switcher button.dark{
    background-image: url({{ '/assets/images/light-mode.svg' | relative_url }});
}

.dark-theme-switcher button.light{
    background-image: url({{ '/assets/images/dark-mode.svg' | relative_url }});
}

.dark-theme-switcher button{
    background-color: transparent;
    background-repeat: no-repeat;
    background-position: center;
    border: none;
    color: #ccc;
    cursor: pointer;
    padding: 12px;
}
</style>
<script>
(function() {
    const themeAttr = 'data-theme';
    var darkThemeSwitcherElement = document.querySelector('.dark-theme-switcher');
    darkThemeSwitcherElement.querySelector('button').setAttribute('class', getTheme());
    darkThemeSwitcherElement.addEventListener('click', function() {
        var currentTheme = getTheme();
        if (currentTheme === 'light') {
            setTheme('dark');
        } else if (currentTheme === 'dark') {
            setTheme('light');
        }
    });

    function setTheme(theme) {
        jtd.setTheme(theme);
        window.localStorage.setItem('color_scheme', theme);
        darkThemeSwitcherElement.querySelector('button').setAttribute('class', getTheme());
    }

    function getTheme() {
        return window.localStorage.getItem('color_scheme') || 'light';
    }
}
)();
</script>